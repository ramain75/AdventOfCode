package com.adventofcode.year2024.day6;

import org.junit.jupiter.api.Test;

import java.util.Map;
import java.util.Set;

import static org.junit.jupiter.api.Assertions.*;

public class Day6Test {

    @Test
    void testDay6WithSampleInput() {
        String input = """
                ....#.....
                .........#
                ..........
                ..#.......
                .......#..
                ..........
                .#..^.....
                ........#.
                #.........
                ......#...""";
        Day6 day6 = new Day6(input);
        Map<Day6.Point, Boolean> labGrid = day6.getLabGrid();
        assertEquals(100, labGrid.size());
        assertFalse(labGrid.get(new Day6.Point(4, 6)));
        assertTrue(labGrid.get(new Day6.Point(6, 9)));
        assertFalse(labGrid.get(new Day6.Point(9, 9)));
        Set<Day6.Point> distinctGuardPositions = day6.getDistinctGuardPositions();
        assertEquals(1, distinctGuardPositions.size());
        assertEquals(new Day6.Point(4, 6), distinctGuardPositions.stream().findFirst().orElseThrow());
        assertEquals(new Day6.Point(9, 9), day6.getBottomRightPosition());

        assertEquals(41, day6.patrolLab());
    }

    @Test
    void testDay6WithPuzzleInput() {
        String input = """
                .........#...#................................#.........#............#.....#....#.....................................#...........
                ............................................................................................#...............#.......#.............
                ....#.......#......................................#.........................#..#....#....#.........#.............................
                ............##..#............#........................#........#........#.......#...........................#................#....
                ..................................#.............#....#..........................#................#..#....##........#..............
                ..................##.#...#....#...................##.....#.................#......##.....................##............#..........
                ..........#..................................#....................................................................................
                ......#...........#.......................................#........#........................#........#............................
                ..................#................................#........................#.............................#.......................
                .............#............................................................................................##.................#....
                ........#..............................................................................................#..............#.#.......#.
                ..#...........#..............#..............#..#.....#.......#......#.......................#....#...................##..........#
                ..............##................................#..............##....................#...#........................................
                ......................#.................#.......#.......##.##....................................#................................
                ...........#...#.#..................#...#.....................................................................#...................
                .....#....#...#..............................................................................................#.......#............
                ...............................#...........#.#.............#.........#.....................................#.#....................
                ........#...........#.......#............................#.....#.............................#.........................#..........
                ...................................................#...........#.....#..#....#.............#.....#..#..#.............#............
                ..............#.........#..#..........#.#.......................#...................................#.............................
                ..#.............#..#..#.#...........#...................................................#...........................#...........#.
                ........##....##..........................................................................#.......................................
                .......................................................#.......#.............................#...................#........#.......
                #.....#.#......#...............................................................#..........#........#..............................
                .#.#............#..............#..........................#.#.....................................................#...............
                .................#...#........#....#.....#...#...................................#....#.................#..........#...#.#...#....
                ...#..##........................#..#..................................................................................#.......#...
                .................#...#.#..................................................#..#........#.................#...................#.....
                .......................#.......#....................#......................................#...............................#......
                ...............................................................................................................................#..
                ...........##............................#....................#...................................................................
                ..#........................................#..#.............................#............................#........................
                ..#.#....#..................................#...................................................................................#.
                .................#...#...............#..........#..............................#...#..............................#.#..#..........
                ............#..........#..........#...................................#.....#....................#................##.............#
                ....#...........#.......#......................................#........................................#........#......#...#.....
                .............#.....#...................#....#.....................................................................................
                .....................#.................................#.#...................#.......#.#...............#..........................
                ........#..............#.......#.............#...........................................................#........#..............#
                ............#............................................#.......##................#..............................................
                ...............................#..................................................................................................
                #....................#......#.......................#..........#.........................#................#...............#..#...#
                ..................................................#.....#...........#...#..#......#...........................#...................
                ............#......................#.....#.........#....................................................................#....#....
                .......#...................#...#...........................#.......#......#......................................#.....#..........
                .................................................#.............#....................................#.............................
                ......#.................#.............................................................................#..##.......................
                ....#..............................................#..............#..........#.......#....#............................#..........
                ........#....#............#....#.................#........................................................#.....#.................
                ..#......................#.......................................................#................................................
                .#.....................#..........................................................#.............................#.................
                .............#..............#.#.....#.........................................#...............................#.........#.........
                .............................................................................#............................#....#...#..............
                #.#.#...................................................................#...........................................#.........#...
                ..................................................#.#............#..#...#..............#.....#....................................
                ......#..................................#............................##.........................................#................
                ..#....................................#............#.........#.........#...........#.....#..............................#........
                ......................................#.............#..................#.................#..........................##............
                ...............#.#........#.......................#..........#...............................#.............................#.#....
                .................#....................................................................................#...........................
                #...............................................#.#........#...#...................#............#.................#......#.#......
                ................#........................#......#.............................................#.#..............#....#.............
                .......#..........#..........................#......#.............................................................................
                ....#.......#.................................................#..............#...........#.....#............#............#........
                .....................#...................................#...............................................................#........
                #..........................#..#...........................................#...............#............#............#.............
                .............................#...................................#...#.......................................#......#.............
                ............#........#.................................................#.................#...................#....................
                .........................................#................#.....................................#.................................
                ...........................................................................................#.....................#................
                .....................#.........#..#.#......................................................#........#.............................
                ..#......#.........#.#...................................................#......................#.................................
                .#...........#.........................................................................................#.....................#....
                ..........#....##.#..#..........#........#.#.................................#.....................#..............................
                .....#........#.......#....#...........#...................#...............#..#....#..............................#..............#
                .......#..............................#............#.................................................#........#................#..
                ...............................#..............................................#...................................................
                #..............................................................#.........................................................#........
                .......#....................................................#..............................#..................#..........##.......
                .......................................#...............................................^.............#............................
                ..#...........#.........#............................#...................................#.#.......###.....#......................
                ........#............................................................................................................#............
                ...#...#...........#.................................................................#...#.......#........#.......................
                ...............#.....................................#..........#.......#.#.....#.#..................#............................
                .....#..#..............#.#.......................#.................................................................#..............
                #.....#.........................................#..##....#..........................#...................#..#......#........#......
                ...................##................#..#......................................#.....#............................................
                ....#...............................................................................................#...........................#.
                ....#..........#....#........................#....................................................................................
                ..................#.....................................................#.....................................#...................
                ...........................#......#.......................................................................#..............#........
                ...............#....................#...#...#.......#................#.......#.......#............................................
                #.....##......#.............................................#...#.................................#.................#....#..##..#.
                ..........#.......................................#..................................#...#....#......................#............
                ......#................#.#........#....#......##.........#........................................#...............................
                ......#...#............#...#.........................................................#....#.....#..............#..................
                .........................#...............#........#...#......#....................................................#..#.#..........
                ...##............#........#.#.........................#.............................#............#..............#.................
                .......#.........#..............................#...................................#.......................#.#...................
                #..........#.............#..............................................#.....................................................#...
                ........#..#...#.....................................#............................................................................
                ..................#...............................#..........................................#.............#..............#..#....
                ....#.#..#...#............................#..............#...#..........#......#....#.....................#..........#......#.....
                ................#..............#........................#......#..............#.......................##..........................
                ..........#.....#.............................................#.......#...........................................#...............
                .........#....#........#............#...............#.............................................................................
                ...........#..#..........#..............#..........#......#.......................................................................
                ..........#....................#........................................#.....#..................#..#.#..#...#.....#..............
                ........#...........#...#..................##.........#......................#...#............#......................#............
                ...................................................#........................#.....#.............#.................................
                ........#................#..........................#.#...#......#........................................#.......................
                .............#.........................................##....................#...................#.#..................#...........
                ..................#.............................................#...............................................................#.
                .....#............#................#..............................#...##....#...#.................................................
                #.......................###........#..............#.....#.............#...............#.............#......................#......
                ...........#.............................#........................#.........................................................#.....
                ............#.....#.....#...#....#........#...............................#.....................#..................#....#.........
                ...............#.#..................................#.................#.#......#...........#...#................#.................
                .....#............................................#.....#...............#.....#.............#.......#..........#..................
                .....................................#................................................#.........#..#..............................
                .....................#...............................................#.#...........#........#.....................................
                .............................................#....................#.............#......................#..........................
                ......................................#.........#.........................##........#................#...............#............
                ........................#.....#.....................................#....#........#......#..............#.......##...........#.#..
                ....................#........................................#.........#.........#......#....#............#...........#...........
                ...........##......#...........#................#.......##.....#........#.........#...........................................#...
                ...................#...#....#.............#..#......................................................#............#................
                ....#.........................#....#..................#..............#.............#...................................#..........
                ..................................#.......#.....................#.................................................................
                .............................................#......#.......................................................#.....................""";
        Day6 day6 = new Day6(input);
        assertEquals(4602, day6.patrolLab());
    }

}
